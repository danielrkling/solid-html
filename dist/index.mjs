import{createComponent as e}from"solid-js";import{DelegatedEvents as t,Dynamic as n,ErrorBoundary as r,For as i,Index as a,Match as o,NoHydration as s,Portal as c,SVGElements as l,Show as ee,Suspense as u,Switch as d,addEventListener as f,delegateEvents as p,effect as m,insert as h}from"solid-js/web";import{SyntaxKind as g,parse as _}from"html5parser";function v(e){return typeof e==`string`}function y(e){return typeof e==`function`}const b=Array.from,x=document,S=e=>x.createComment(e);function C(e){return l.has(e)?x.createElementNS(`http://www.w3.org/2000/svg`,e):x.createElement(e)}function w(e,t,n,r){return r&&e.removeEventListener(t,r),n&&e.addEventListener(t,n),n}function T(e,n,r,i){n=n.toLowerCase();let a=t.has(n);return f(e,n,r,a),a&&p([n]),r}function E(e,t,n,r){return e[t]=n,n}function D(e,t,n,r){return n?e.setAttribute(t,``):e.removeAttribute(t),n}function O(e,t,n,r){return n==null?(e.removeAttribute(t),n):(e.setAttribute(t,n),n)}function te(e,t,n,r,i){return r==null?(t.removeAttributeNS(e,n),r):(t.setAttributeNS(e,n,r),r)}function k(e,t,n,r){return e.classList.toggle(t,!!n),n}function A(e,t,n,r){return e.style[t]=n||``,n}function j(e,t,n,r){y(n)&&n(e)}function M(e,t,n,r,i){if(r===i)return r;if(n===`children`)return h(t,r);for(let a of e){let{filter:e,assign:o,isReactive:s=!0}=a;if(v(e)&&n.startsWith(e))n=n.slice(e.length);else if(y(e))n=e(t,n,r,i);else continue;if(n)return y(r)&&s?m(()=>i=o(t,n,r(),i)):o(t,n,r,i),i}}function N(e,t,n,r={}){if(y(n))m(()=>{for(let[i,a]of Object.entries(n()))r[i]=M(e,t,i,a,r[i])});else for(let[i,a]of Object.entries(n))r[i]=M(e,t,i,a,r[i]);return r}const P=`⧙⧘`,F=RegExp(`${P}(\\d+)${P}`,`g`),I=new WeakMap,L=x.createTreeWalker(x,133);function R(e){let t=I.get(e);if(!t){let n=_(e.slice(1).reduce((e,t,n)=>e+P+n+P+t,e[0])),r=n.flatMap(e=>W(e)),i=G(r);t={children:r,template:i},I.set(e,t)}return t}function z(e){return e.length===1?e[0]:e}function B(e){for(;y(e);)e=e();return e}function V(e={},t=[]){function n(e,...t){let r=R(e);function i(e,r){let i=e.content.cloneNode(!0);L.currentNode=i,o(r.children);function o(e){for(let r of e){let e=L.nextNode();if(r.type===5){for(let[i,a]of r.props){let r=H(a,t);M(n.h.rules,e,i,r.length===1?r[0]:()=>r.map(B).join(``))}o(r.children)}else (r.type===3||r.type===4)&&(h(e.parentNode,a(r),e),L.currentNode=e)}}return b(i.childNodes)}function a(e){switch(e.type){case 1:return e.value;case 3:return t[e.value];case 2:return S(e.value)}let r=e.type===4&&e.template,o={};for(let[n,r]of e.props){let e=H(r,t);o[n]=e.length===1?e[0]:()=>e.map(B)}return e.children.length&&(o.children=r?()=>i(r,e):()=>z(e.children.map(a))),n.h(e.name,o)}return r.template?i(r.template,r):z(r.children.map(a))}return n.h=Z(e,t),n}function H(e,t){return e.map(e=>v(e)?e:t[e])}function U(e=``){return e.split(F).map((e,t)=>t%2==1?Number(e):e).filter(e=>!v(e)||e.trim())}function W(e){if(e.type===g.Text){let t=U(e.value);return t.map(e=>{let t=v(e)?1:3;return{type:t,value:e}})}if(e.name[0]===`!`||e.name===``)return{type:2,value:e.body[0].value};let t=e.attributes.map(e=>[e.name.value,U(e.value?.value)]),n=e.body?.flatMap(e=>W(e))??[];return/^[A-Z]/.test(e.rawName)?{type:4,name:e.rawName,props:t,children:n,template:G(n)}:{type:5,name:e.name,props:t,children:n}}function G(e){if(e.some(e=>e.type===5)){let t=x.createElement(`template`);return K(e,t.content),t}}function K(e,t){for(let n of e)switch(n.type){case 1:t.appendChild(x.createTextNode(n.value));break;case 2:t.appendChild(S(n.value));break;case 3:t.appendChild(S(`+`));break;case 4:t.appendChild(S(n.name));break;case 5:let e=C(n.name);t.appendChild(e),K(n.children,e);break}}const q=[{filter:`on:`,assign:w,isReactive:!1},{filter:`on`,assign:T,isReactive:!1},{filter:`prop:`,assign:E},{filter:`bool:`,assign:D},{filter:`attr:`,assign:O},{filter:`ref:`,assign:j,isReactive:!1},{filter:`class:`,assign:k},{filter:`style:`,assign:A},{filter:`@`,assign:T,isReactive:!1},{filter:`.`,assign:E},{filter:`?`,assign:D},{filter:``,assign:O}],J={For:i,Index:a,Match:o,Suspense:u,ErrorBoundary:r,Show:ee,Switch:d,Dynamic:n,Portal:c,NoHydration:s},Y=Z(),X=V();X.h=Y;function Z(t={},n=[]){function r(t,n,...i){if(i.length===1?n.children=i[0]:i.length>1&&(n.children=i),y(t))return e(t,$(n));if(v(t)){let i=r.components[t];if(i)return e(i,$(n));/^[A-Z]/.test(t)&&console.warn(`Forgot to define ${i}`);let a=C(t);return N(r.rules,a,n),a}}return r.components={...J,...t},r.define=e=>{Object.assign(r.components,e)},r.rules=[...n,...q],r}const Q=new WeakSet;function ne(e){return y(e)&&Q.add(e),e}function $(e={}){for(let[t,{value:n}]of Object.entries(Object.getOwnPropertyDescriptors(e)))y(n)&&n.length===0&&!Q.has(n)&&Object.defineProperty(e,t,{get(){return n()},enumerable:!0});return e}export{Z as H,V as HTML,M as assign,O as assignAttribute,te as assignAttributeNS,D as assignBooleanAttribute,k as assignClass,T as assignDelegatedEvent,w as assignEvent,E as assignProperty,j as assignRef,A as assignStyle,J as defaultComponents,q as defaultRules,Y as h,X as html,Q as markedOnce,ne as once,N as spread,$ as wrapProps};
//# sourceMappingURL=index.mjs.map