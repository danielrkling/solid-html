import{ErrorBoundary as e,For as t,Index as n,Match as r,Show as i,Suspense as a,Switch as o,createComponent as s,mergeProps as c}from"solid-js";import{SVGElements as l,insert as u,spread as d}from"solid-js/web";const f=e=>e>=48&&e<=57||e>=65&&e<=90||e>=97&&e<=122||e===46||e===58||e===95||e===45,p=e=>e>=9&&e<=13||e===32;function m(e,t){let n=[],r=0,i=``,a=``,o=0;for(let s=0;s<e.length;s++){let c=e[s],l=c.length;for(o=0;o<l;)if(r===0){let e=c.indexOf(`<`,o);if(e===-1)o<l&&n.push({type:6,value:c.slice(o)}),o=l;else{e>o&&n.push({type:6,value:c.slice(o,e)});let t=c.charCodeAt(e+1);t===47||f(t)?(n.push({type:0,value:`<`}),r=1,o=e+1):(n.push({type:6,value:`<`}),o=e+1)}}else if(r===1){let e=c[o],s=c.charCodeAt(o);if(p(s))o++;else if(e===`>`)n.push({type:1,value:`>`}),r=t.has(a)?3:0,o++;else if(e===`=`)n.push({type:4,value:e}),o++;else if(e===`/`)n.push({type:2,value:e}),o++;else if(e===`"`||e===`'`)n.push({type:8,value:e}),i=e,r=2,o++;else if(f(s)){let e=o;for(;o<l&&f(c.charCodeAt(o));)o++;a=c.slice(e,o),n.push({type:3,value:a})}else o++}else if(r===2){let e=c.indexOf(i,o);e===-1?(n.push({type:5,value:c.slice(o)}),o=l):(e>o&&n.push({type:5,value:c.slice(o,e)}),n.push({type:8,value:i}),r=1,i=``,o=e+1)}else if(r===3){let e=`</${a}>`,t=c.indexOf(e,o);t===-1?(n.push({type:6,value:c.slice(o)}),o=l):(t>o&&n.push({type:6,value:c.slice(o,t)}),r=0,o=t)}s<e.length-1&&n.push({type:7,value:s})}return n}function h(e,t){let n={type:0,children:[]},r=[n],i=0,a=e.length;for(;i<a;){let n=e[i],o=r[r.length-1];if(n.type===6){let t=n.value,r=!0,a=t.trim();if(a===``){let t=e[i-1]?.type,n=e[i+1]?.type;(t===1||t===0||n===0)&&(r=!1)}r&&o.children.push({type:2,value:t}),i++;continue}if(n.type===7){o.children.push({type:3,value:n.value}),i++;continue}if(n.type===0){let n=e[i+1];if(n&&n.type===2){let t=e[i+2];t&&t.type===3&&r.length>1&&r[r.length-1].name===t.value&&r.pop(),i+=4;continue}i++;let s=e[i++].value,c={type:1,name:s,props:[],children:[]};for(;i<a;){let t=e[i];if(t.type===1||t.type===2)break;if(t.type===7){c.props.push({type:3,value:t.value}),i++;continue}if(t.type===3){let n=t.value;if(i++,e[i]?.type===4){i++;let t=e[i];if(t.type===7)c.props.push({name:n,type:2,value:t.value}),i++;else if(t.type===8){let r=t.value;i++;let o=[];for(;i<a&&e[i].type!==8;){let t=e[i++];t.value!==``&&o.push(t.value)}if(i++,o.length===0)c.props.push({name:n,type:1,value:``,quote:r});else if(o.length===1){let e=o[0];c.props.push({name:n,type:typeof e==`string`?1:2,value:e,quote:r})}else c.props.push({name:n,type:4,value:o,quote:r})}}else c.props.push({name:n,type:0,value:!0});continue}i++}o.children.push(c),e[i]?.type===2?i+=2:t.has(s)?i++:(i++,r.push(c));continue}i++}return n}function g(e){return typeof e==`number`}function _(e){return typeof e==`function`}function v(e){return typeof e==`object`}const y=Array.from,b=document;function x(e){return l.has(e)?b.createElementNS(`http://www.w3.org/2000/svg`,e):b.createElement(e)}function S(e){return e.length===1?e[0]:e}function C(e){for(;_(e);)e=e();return e}function w(e){return e.name[0]===e.name[0].toUpperCase()}function T(e){return!w(e)}function E(e){if(e.type===0||w(e)){if(e.children.some(T)){let t=document.createElement(`template`);t.innerHTML=e.children.map(D).join(``),e.template=t}e.children.forEach(E)}T(e)&&e.children.forEach(E)}function D(e){switch(e.type){case 2:return e.value;case 3:return`<!--+-->`;case 1:let t=``;return e.props=e.props.filter(e=>{if(e.type===1){t+=` ${e.name}="${e.value}"`;return}else if(e.type===0){t+=` ${e.name}`;return}return!0}),`<${e.name}${t}>${e.children.map(D).join(``)}</${e.name}>`}}const O=new WeakMap,k=document.createTreeWalker(document,133),A=new Set([`area`,`base`,`br`,`col`,`embed`,`hr`,`img`,`input`,`link`,`meta`,`param`,`source`,`track`,`wbr`]),j=new Set([`script`,`style`,`textarea`,`title`]);function M(e){function t(t,...n){let r=N(t);return F(r,n,e)}return t.components=e,t.sld=t,t.define=function(t){return M({...e,...t})},t}function N(e){let t=O.get(e);return t||(t=h(m(e,j),A),E(t),O.set(e,t)),t}function P(e,t,n){switch(e.type){case 2:return e.value;case 3:return t[e.value];case 1:let r=n[e.name];if(r)return s(r,I(e,t,n));let i=x(e.name);return d(i,I(e,t,n),l.has(e.name),!0),i}}function F(e,t,n){if(!(`template`in e))return S(e.children.map(e=>P(e,t,n)));let r=e.template.content.cloneNode(!0);k.currentNode=r,i(e.children);function i(e){for(let r of e){let e=k.nextNode();if(r.type===1){if(w(r)){u(e.parentNode,P(r,t,n),e),k.currentNode=e;continue}if(r.props.length){let i=I(r,t,n);d(e,i,l.has(r.name),!0)}i(r.children)}else r.type===3&&(u(e.parentNode,P(r,t,n),e),k.currentNode=e)}}return y(r.childNodes)}function I(e,t,n,r={}){for(let n of e.props)switch(n.type){case 0:r[n.name]=!0;break;case 1:r[n.name]=n.value;break;case 2:L(r,n.name,t[n.value]);break;case 4:let e=()=>n.value.map(e=>g(e)?C(t[e]):e).join(``);L(r,n.name,e);break;case 3:let i=t[n.value];if(!v(i))throw Error(`Can only spread objects`);r=c(r,i);break}return e.children.length&&Object.defineProperty(r,`children`,{get(){return F(e,t,n)}}),r}function L(e,t,n){_(n)&&n.length===0&&t!==`ref`&&!t.startsWith(`on`)?Object.defineProperty(e,t,{get(){return n()},enumerable:!0}):e[t]=n}const R={For:t,Index:n,Match:r,Suspense:a,ErrorBoundary:e,Show:i,Switch:o},z=M(R);var B=z;const V=z.define;function H(e){return t=>s(e,t)}export{V as SLD,M as createSLD,B as default,R as defaultComponents,h as parse,H as run,z as sld};
//# sourceMappingURL=index.mjs.map