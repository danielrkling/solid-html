import{createComponent as e}from"solid-js";import{DelegatedEvents as t,Dynamic as n,ErrorBoundary as r,For as i,Index as a,Match as o,NoHydration as s,Portal as c,SVGElements as ee,Show as te,Suspense as l,Switch as u,addEventListener as d,delegateEvents as f,effect as p,insert as m}from"solid-js/web";import{SyntaxKind as h,parse as g}from"html5parser";function _(e){return typeof e==`string`}function v(e){return typeof e==`function`}const y=Array.from,b=document,x=e=>b.createComment(e);function S(e){return ee.has(e)?b.createElementNS(`http://www.w3.org/2000/svg`,e):b.createElement(e)}function C(e){return e.length===1?e[0]:e}function w(e){for(;v(e);)e=e();return e}function T(e,t,n,r){return r&&e.removeEventListener(t,r),n&&e.addEventListener(t,n),n}function E(e,n,r,i){n=n.toLowerCase();let a=t.has(n);return d(e,n,r,a),a&&f([n]),r}function D(e,t,n,r){return e[t]=n,n}function O(e,t,n,r){return n?e.setAttribute(t,``):e.removeAttribute(t),n}function k(e,t,n,r){return n==null?(e.removeAttribute(t),n):(e.setAttribute(t,n),n)}function A(e,t,n,r,i){return r==null?(t.removeAttributeNS(e,n),r):(t.setAttributeNS(e,n,r),r)}function j(e,t,n,r){return e.classList.toggle(t,!!n),n}function M(e,t,n,r){return e.style[t]=n||``,n}function N(e,t,n,r){v(n)&&n(e)}function P(e,t,n,r,i){if(r===i)return r;if(n===`children`)return m(t,r);for(let a of e){let{filter:e,assign:o,isReactive:s=!0}=a;if(_(e)&&n.startsWith(e))n=n.slice(e.length);else if(v(e))n=e(t,n,r,i);else continue;if(n)return v(r)&&s?p(()=>i=o(t,n,r(),i)):o(t,n,r,i),i}}function F(e,t,n,r={}){if(v(n))p(()=>{for(let[i,a]of Object.entries(n()))r[i]=P(e,t,i,a,r[i])});else for(let[i,a]of Object.entries(n))r[i]=P(e,t,i,a,r[i]);return r}const I=`⧙⧘`,L=RegExp(`${I}(\\d+)${I}`,`g`),R=new WeakMap,z=b.createTreeWalker(b,133);function B(e){let t=R.get(e);if(!t){let n=g(e.slice(1).reduce((e,t,n)=>e+I+n+I+t,e[0])),r=n.flatMap(e=>W(e)),i=G(r);t={children:r,template:i},R.set(e,t)}return t}function V(e={},t=[]){function n(e,...t){let r=B(e);function i(e,r){let i=e.content.cloneNode(!0);z.currentNode=i,o(r.children);function o(e){for(let r of e){let e=z.nextNode();if(r.type===5){for(let[i,a]of r.props){let r=H(a,t);P(n.h.rules,e,i,r.length===1?r[0]:()=>r.map(w).join(``))}o(r.children)}else (r.type===3||r.type===4)&&(m(e.parentNode,a(r),e),z.currentNode=e)}}return y(i.childNodes)}function a(e){switch(e.type){case 1:return e.value;case 3:return t[e.value];case 2:return x(e.value)}let r=e.type===4&&e.template,o={};for(let[n,r]of e.props){let e=H(r,t);o[n]=e.length===1?e[0]:()=>e.map(w)}return e.children.length&&(o.children=r?()=>i(r,e):()=>C(e.children.map(a))),n.h(e.name,o)}return r.template?i(r.template,r):C(r.children.map(a))}return n.h=Z(e,t),n}function H(e,t){return e.map(e=>_(e)?e:t[e])}function U(e=``){return e.split(L).map((e,t)=>t%2==1?Number(e):e).filter(e=>!_(e)||e.trim())}function W(e){if(e.type===h.Text){let t=U(e.value);return t.map(e=>{let t=_(e)?1:3;return{type:t,value:e}})}if(e.name[0]===`!`||e.name===``)return{type:2,value:e.body[0].value};let t=e.attributes.map(e=>[e.name.value,U(e.value?.value)]),n=e.body?.flatMap(e=>W(e))??[];return/^[A-Z]/.test(e.rawName)?{type:4,name:e.rawName,props:t,children:n,template:G(n)}:{type:5,name:e.name,props:t,children:n}}function G(e){if(e.some(e=>e.type===5)){let t=b.createElement(`template`);return K(e,t.content),t}}function K(e,t){for(let n of e)switch(n.type){case 1:t.appendChild(b.createTextNode(n.value));break;case 2:t.appendChild(x(n.value));break;case 3:t.appendChild(x(`+`));break;case 4:t.appendChild(x(n.name));break;case 5:let e=S(n.name);t.appendChild(e),K(n.children,e);break}}const q=[{filter:`on:`,assign:T,isReactive:!1},{filter:`on`,assign:E,isReactive:!1},{filter:`prop:`,assign:D},{filter:`bool:`,assign:O},{filter:`attr:`,assign:k},{filter:`ref:`,assign:N,isReactive:!1},{filter:`class:`,assign:j},{filter:`style:`,assign:M},{filter:`@`,assign:E,isReactive:!1},{filter:`.`,assign:D},{filter:`?`,assign:O},{filter:``,assign:k}],J={For:i,Index:a,Match:o,Suspense:l,ErrorBoundary:r,Show:te,Switch:u,Dynamic:n,Portal:c,NoHydration:s},Y=Z(),X=V();X.h=Y;function Z(t={},n=[]){function r(t,n,...i){if(i.length&&(n.children=C(i)),v(t))return e(t,$(n));if(_(t)){let i=r.components[t];if(i)return e(i,$(n));/^[A-Z]/.test(t)&&console.warn(`Forgot to define ${i}`);let a=S(t);return F(r.rules,a,n),a}}return r.components={...J,...t},r.define=e=>{Object.assign(r.components,e)},r.rules=[...n,...q],r}const Q=new WeakSet;function ne(e){return v(e)&&Q.add(e),e}function $(e={}){for(let[t,{value:n}]of Object.entries(Object.getOwnPropertyDescriptors(e)))v(n)&&n.length===0&&!Q.has(n)&&Object.defineProperty(e,t,{get(){return n()},enumerable:!0});return e}export{Z as H,V as HTML,P as assign,k as assignAttribute,A as assignAttributeNS,O as assignBooleanAttribute,j as assignClass,E as assignDelegatedEvent,T as assignEvent,D as assignProperty,N as assignRef,M as assignStyle,J as defaultComponents,q as defaultRules,Y as h,X as html,Q as markedOnce,ne as once,F as spread,$ as wrapProps};
//# sourceMappingURL=index.mjs.map