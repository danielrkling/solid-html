import{Dynamic as e,ErrorBoundary as t,For as n,Index as r,Match as i,NoHydration as a,Portal as o,SVGElements as s,Show as c,Suspense as l,Switch as u,insert as d,spread as f}from"solid-js/web";import{createComponent as p,mergeProps as m}from"solid-js";import{SyntaxKind as h,parse as g}from"html5parser";function _(e){return typeof e==`string`}function v(e){return typeof e==`number`}function y(e){return typeof e==`function`}function b(e){return typeof e==`boolean`}function x(e){return typeof e==`object`}const S=Array.from,C=document,w=e=>C.createComment(e);function T(e){return s.has(e)?C.createElementNS(`http://www.w3.org/2000/svg`,e):C.createElement(e)}function E(e){return e.length===1?e[0]:e}function D(e){for(;y(e);)e=e();return e}const O=`⧙⧘`,k=RegExp(`${O}(\\d+)${O}`,`g`);function A(e){let t=g(e.slice(1).reduce((e,t,n)=>e+O+n+O+t,e[0]));return{type:6,children:j(t)}}function j(e){return e.flatMap(M)}function M(e){if(e.type===h.Text){let t=N(e.value);return t.map(e=>{let t=_(e)?1:3;return{type:t,value:e}})}if(e.name[0]===`!`||e.name===``)return{type:2,value:e.body.reduce((e,t)=>e+=t.value,``)};let t=e.attributes.map(e=>{let t=N(e.name.value);if(t.length===1){let n=t[0];if(_(n)){let t=N(e.value?.value);return t.length===0?[n,!0]:t.length===1?[n,t[0]]:[n,t]}else return[`ref`,n]}else return[t[0],t[1]]}),n=e.body?.flatMap(M)??[],r=e.rawName;return{type:/^[A-Z]/.test(r)?5:4,name:r,props:t,children:n}}function N(e=``){return e.split(k).map((e,t)=>t%2==1?Number(e):e).filter(e=>v(e)||e.trim())}function P(e){if(e.type===6||e.type===5){if(e.children.some(e=>e.type===4)){let t=document.createElement(`template`);t.innerHTML=e.children.map(F).join(``),e.template=t}e.children.forEach(P)}e.type===4&&e.children.forEach(P)}function F(e){switch(e.type){case 1:return e.value;case 2:return`<!--${e.value}-->`;case 3:return`<!--+-->`;case 5:return`<!--${e.name}-->`;case 4:let t=``;return e.props=e.props.filter(([e,n])=>{if(_(n)){t+=` ${e}="${n}"`;return}else if(n===!0){t+=` ${e}`;return}return!0}),`<${e.name}${t}>${e.children.map(F).join(``)}</${e.name}>`}}const I=new WeakMap,L=document.createTreeWalker(document,133);function R(e){function t(t,...n){let r=z(t);return V(r,n,e)}return t.define=function(t){return R({...e,...t})},t.sld=t,Object.entries(e).forEach(([e,n])=>{Object.defineProperty(t,e,{get(){return e=>p(n,e)}})}),t}function z(e){let t=I.get(e);return t||(t=A(e),P(t),I.set(e,t)),t}function B(e,t,n){switch(e.type){case 1:return e.value;case 3:return t[e.value];case 2:return w(e.value);case 4:let r=T(e.name);return f(r,H(e,t,n),s.has(e.name),!0),r;case 5:let i=n[e.name];if(!i)throw Error(`${e.name} is not defined`);return p(i,H(e,t,n))}}function V(e,t,n){let r=(e.type===6||e.type===5)&&e.template;if(!r)return E(e.children.map(e=>B(e,t,n)));let i=r.content.cloneNode(!0);L.currentNode=i,a(e.children);function a(e){for(let r of e){let e=L.nextNode();if(r.type===4){if(r.props.length){let i=H(r,t,n);f(e,i,s.has(r.name),!0)}a(r.children)}else (r.type===3||r.type===5)&&(d(e.parentNode,B(r,t,n),e),L.currentNode=e)}}return S(i.childNodes)}function H(e,t,n,r={}){for(let[n,i]of e.props)if(n===`...`){if(v(i)){let e=t[i];if(!x(e))throw Error(`Can only spread objects`);r=m(r,e)}}else{let e=_(i)||b(i)?i:v(i)?t[i]:()=>i.map(e=>v(e)?D(t[e]):e).join(``);y(e)&&e.length===0&&n!==`ref`&&!n.startsWith(`on`)?Object.defineProperty(r,n,{get(){return e()},enumerable:!0}):r[n]=e}return e.children.length&&Object.defineProperty(r,`children`,{get(){return V(e,t,n)}}),r}const U={For:n,Index:r,Match:i,Suspense:l,ErrorBoundary:t,Show:c,Switch:u,Dynamic:e,Portal:o,NoHydration:a},W=R(U);var G=W;function K(e){return t=>p(e,t)}export{R as SLD,K as comp,G as default,U as defaultComponents,A as parse,W as sld};
//# sourceMappingURL=index.mjs.map